<html>
  <head>
    <title>Test Three.js app</title>
  </head>
  <body>
<script type="text/javascript" src="js/three.min.js"></script>
<script type="text/javascript" src="js/TrackBallControls.js"></script>
<script type="text/javascript" src="js/OrbitControls.js"></script>
<canvas 
  id="7e20a710-9577-48b7-a1ab-434ab3d1dd4e" 
  width="600" 
  height="400"
>
</canvas>

<script>
var canvas = 
  document.getElementById("7e20a710-9577-48b7-a1ab-434ab3d1dd4e");

var camera, controls; 
var scene, renderer;

renderer = new THREE.WebGLRenderer({ 
  canvas: canvas,
  alpha: true,
  antialiasing: true
});
renderer.setSize( canvas.width, canvas.height);

scene = new THREE.Scene();

init_camera();
init_lights();
init_controls();
init_scene();

render();
animate();

function init_camera() {
  camera = new THREE.PerspectiveCamera( 
    22.5, 
    canvas.width/canvas.height, 
    0.1, 
    1000.0
  );
  camera.position.set( 8.970129420641078, -2.2518929835387413, 3.393511517337327 ); 
  camera.up = new THREE.Vector3(0.0, 0.0, 1.0);
  camera.lookAt( new THREE.Vector3(0.5006736891358027, 0.5, 0.5) );
}

function init_lights() {
  var light = new THREE.DirectionalLight( 0x882222 );
  camera.add( light );
  light.position.set( 0, 100., 30. );

  light = new THREE.DirectionalLight( 0x228822 );
  camera.add( light );
  light.position.set( 60., 80., 30. );

  light = new THREE.DirectionalLight( 0x222288 );
  camera.add( light );
  light.position.set( 0., 80., 90. );

  light = new THREE.AmbientLight( 0x444444 );
  scene.add( light );
  scene.add( camera );

}  

function init_controls() {
  controls = new THREE.OrbitControls( camera, canvas );
  controls.rotateSpeed = 5.0;
  controls.zoomSpeed = 1.2;
  controls.noZoom = false;
  controls.noPan = true;
  controls.staticMoving = true;
  controls.dynamicDampingFactor = 0.3;
  controls.addEventListener( 'change', render ); 
  controls.target.set( 0.5006736891358027, 0.5, 0.5 );
}

function init_scene() {
  var i = 20;
  var material = new THREE.LineBasicMaterial({
    color : 0xff0000,
    linewidth : 4.0,
    fog : true
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 0.0, 0.0),
  new THREE.Vector3(1.0, 0.0, 0.0),
  new THREE.Vector3(1.0, 1.0, 0.0),
  new THREE.Vector3(0.0, 1.0, 0.0),
  new THREE.Vector3(0.0, 0.0, 0.0)
  );
  var line = new THREE.Line( geometry, material);
  scene.add( line);
    var material = new THREE.LineBasicMaterial({
    color : 0xff0000,
    linewidth : 4.0,
    fog : true
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 0.0, 1.0),
  new THREE.Vector3(1.0, 0.0, 1.0),
  new THREE.Vector3(1.0, 1.0, 1.0),
  new THREE.Vector3(0.0, 1.0, 1.0),
  new THREE.Vector3(0.0, 0.0, 1.0)
  );
  var line = new THREE.Line( geometry, material);
  scene.add( line);
    var material = new THREE.LineBasicMaterial({
    color : 0xff0000,
    linewidth : 4.0,
    fog : true
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 0.0, 0.0),
  new THREE.Vector3(0.0, 0.0, 1.0)
  );
  var line = new THREE.Line( geometry, material);
  scene.add( line);
    var material = new THREE.LineBasicMaterial({
    color : 0xff0000,
    linewidth : 4.0,
    fog : true
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.0, 0.0, 0.0),
  new THREE.Vector3(1.0, 0.0, 1.0)
  );
  var line = new THREE.Line( geometry, material);
  scene.add( line);
    var material = new THREE.LineBasicMaterial({
    color : 0xff0000,
    linewidth : 4.0,
    fog : true
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.0, 1.0, 0.0),
  new THREE.Vector3(1.0, 1.0, 1.0)
  );
  var line = new THREE.Line( geometry, material);
  scene.add( line);
    var material = new THREE.LineBasicMaterial({
    color : 0xff0000,
    linewidth : 4.0,
    fog : true
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 1.0, 0.0),
  new THREE.Vector3(0.0, 1.0, 1.0)
  );
  var line = new THREE.Line( geometry, material);
  scene.add( line);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        var rc = 0.5*Math.sqrt(2)*ro;
    context.arc(cc,cc,rc,0,2*Math.PI,true);
      context.fillStyle = 'rgb(255,0,0)';
  context.fill();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 0.0, 0.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        context.moveTo((cc-ro*0.5*Math.sqrt(2)),(cc-ro*0.5*Math.sqrt(2)));
    context.lineTo((cc+ro*0.5*Math.sqrt(2)),(cc-ro*0.5*Math.sqrt(2)));
    context.lineTo((cc+ro*0.5*Math.sqrt(2)),(cc+ro*0.5*Math.sqrt(2)));
    context.lineTo((cc-ro*0.5*Math.sqrt(2)),(cc+ro*0.5*Math.sqrt(2)));
    context.closePath();
      context.fillStyle = 'rgb(0,255,0)';
  context.fill();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.0, 0.0, 0.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        context.moveTo(cc,cc-ro);
    context.lineTo(cc+ro,cc);
    context.lineTo(cc,cc+ro);
    context.lineTo(cc-ro,cc);
    context.closePath();
      context.fillStyle = 'rgb(0,0,255)';
  context.fill();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.0, 1.0, 0.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        context.moveTo((cc-ro*0.5*Math.sqrt(3)),(cc-ro*0.5));
    context.lineTo((cc+ro*0.5*Math.sqrt(3)),(cc-ro*0.5));
    context.lineTo(cc,cc+ro);
    context.closePath();
      context.fillStyle = 'rgb(255,255,0)';
  context.fill();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 1.0, 0.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        context.moveTo(cc,cc-ro);
    context.lineTo((cc+ro*0.5*Math.sqrt(3)),(cc+ro*0.5));
    context.lineTo((cc-ro*0.5*Math.sqrt(3)),(cc+ro*0.5));
    context.closePath();
      context.fillStyle = 'rgb(255,0,255)';
  context.fill();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 0.0, 1.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        var th = Math.PI/5;
    var phi = (1 + Math.sqrt(5))/2;
    var ri = ro/(phi*phi);
    context.moveTo(cc,cc+ro);
    context.lineTo(cc+ri*Math.sin(1*th),cc+ri*Math.cos(1*th));
    context.lineTo(cc+ro*Math.sin(2*th),cc+ro*Math.cos(2*th));
    context.lineTo(cc+ri*Math.sin(3*th),cc+ri*Math.cos(3*th));
    context.lineTo(cc+ro*Math.sin(4*th),cc+ro*Math.cos(4*th));
    context.lineTo(cc+ri*Math.sin(5*th),cc+ri*Math.cos(5*th));
    context.lineTo(cc+ro*Math.sin(6*th),cc+ro*Math.cos(6*th));
    context.lineTo(cc+ri*Math.sin(7*th),cc+ri*Math.cos(7*th));
    context.lineTo(cc+ro*Math.sin(8*th),cc+ro*Math.cos(8*th));
    context.lineTo(cc+ri*Math.sin(9*th),cc+ri*Math.cos(9*th));
    context.closePath();
      context.fillStyle = 'rgb(0,255,255)';
  context.fill();
    context.lineWidth = 1.0;
  context.strokeStyle = 'black';
  context.stroke();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.0, 0.0, 1.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        context.moveTo((cc-ro*0.5*Math.sqrt(2)),(cc-ro*0.5*Math.sqrt(2)));
    context.lineTo((cc+ro*0.5*Math.sqrt(2)),(cc-ro*0.5*Math.sqrt(2)));
    context.lineTo((cc+ro*0.5*Math.sqrt(2)),(cc+ro*0.5*Math.sqrt(2)));
    context.lineTo((cc-ro*0.5*Math.sqrt(2)),(cc+ro*0.5*Math.sqrt(2)));
    context.closePath();
      context.fillStyle = 'rgb(90,90,90)';
  context.fill();
    context.lineWidth = 1.0;
  context.strokeStyle = 'rgb(0,255,0)';
  context.stroke();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.0, 1.0, 1.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
      var canv = document.createElement('canvas');
    var pointSize = 5*5.0;
    var canvSize = pointSize+2*1.0+2;
    canv.width = canvSize;
    canv.height = canvSize;
    var cc = canvSize/2;
    var ro = pointSize/2;
    var context = canv.getContext('2d');
    context.beginPath();
        var rc = 0.5*Math.sqrt(2)*ro;
    context.arc(cc,cc,rc,0,2*Math.PI,true);
      context.fillStyle = 'rgba(0,0,0,0)';
  context.fill();
    context.lineWidth = 1.0;
  context.strokeStyle = 'rgb(0,0,0)';
  context.stroke();
    var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: canvSize,
    sizeAttenuation: false,
    fog: true
  });
  material.alphaTest = 0.05;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 1.0, 1.0)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
    var canv = document.createElement('canvas');
  var context = canv.getContext('2d');
  var boarderWidth = 1.0;
  var margin = 5.0;
  var textHeight = 10;
  var text = "hello world";
  var font = 'Helvetica';
  context.font = textHeight + 'pt ' + font;
  var metrics = context.measureText( text);
  var textWidth = metrics.width;
  var rectHeight = 2*margin + textHeight;
  var rectWidth = 2*margin + textWidth;
  var canvSize = 2*(boarderWidth+1+Math.max(rectHeight,rectWidth));
  canv.height = canvSize;
  canv.width = canvSize;
  context.translate( canvSize/2 , canvSize/2);
  context.scale(1,-1);
  context.strokeRect( -canvSize/2, -canvSize/2, canvSize, canvSize);
  
      context.font = textHeight + 'pt ' + font;
  context.fillStyle = 'rgb(0,0,0)';
  context.textAlign = 'center';
  context.textBaseline = 'middle';
  context.fillText( text, 0, 0);
  var texture = new THREE.Texture(canv);
  texture.needsUpdate = true;
  var i = i+1;
  var material = new THREE.PointCloudMaterial({
    map: texture,
    transparent: true,
    size: i*5,
    sizeAttenuation: false,
    fog: true
  });
  console.log( canvSize);
  console.log( material.size);
  material.alphaTest = 0.1;
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(1.1, 0.5, 0.5)
  )
  var point = new THREE.PointCloud(geometry, material);
  point.sortParticles = true;
  scene.add( point);
    var material = new THREE.MeshPhongMaterial( {
    color : 0x0000ff,
    ambient : 0xffffff,
    specular : 0x444444,
    emissive : 0x000000,
    shininess : 100,
    transparent : true,
    opacity : 0.8,
    side: THREE.DoubleSide,
    wireframe : false,
    fog : true,
  });
  var geometry = new THREE.Geometry();
  geometry.vertices.push(
    new THREE.Vector3(0.0, 0.0, 0.0),
  new THREE.Vector3(1.0, 0.0, 0.0),
  new THREE.Vector3(1.0, 1.0, 0.0),
  new THREE.Vector3(0.0, 1.0, 0.0),
  new THREE.Vector3(0.0, 0.0, 1.0),
  new THREE.Vector3(1.0, 0.0, 1.0),
  new THREE.Vector3(1.0, 1.0, 1.0),
  new THREE.Vector3(0.0, 1.0, 1.0)
  );
  geometry.faces.push(
    new THREE.Face3(0,1,2),
  new THREE.Face3(0,2,3),
  new THREE.Face3(0,4,1),
  new THREE.Face3(1,4,5),
  new THREE.Face3(1,5,2),
  new THREE.Face3(2,5,6),
  new THREE.Face3(2,6,3),
  new THREE.Face3(3,6,7),
  new THREE.Face3(3,7,0),
  new THREE.Face3(0,7,4),
  new THREE.Face3(4,6,5),
  new THREE.Face3(6,4,7)
  );
  geometry.computeFaceNormals();
  
  var mesh = new THREE.Mesh( geometry, material);
  scene.add( mesh);
  
}

function render(){
  renderer.render(scene, camera);
}

function animate(){
  requestAnimationFrame( animate );
  controls.update();        
}
</script>

  </body>
</html>
